大数据

### Spark引擎中，一个任务从提交到执行的具体过程是怎样的？

- 构建DAG；
- DAGScheduler以是否Shuffle为依据将DAG切分成Stage，将Stage中生成的Task以TaskSet的形式给TaskScheduler；
- TaskScheduler调度Task，根据资源情况分配到相应的Executor中；
- 各个Executor接收Task，放入线程池里进行。

### 简要介绍一下你所构建过的数据仓库？

Lambda架构，批处理流处理两套类似的逻辑。

### ETL中为什么要使用Kafka组件，起到了哪些作用？

为什么要在我们的数据处理平台中使用这样的一个消息系统呢？消息系统能给我们带来什么样的好处呢？

- 解耦

  在项目启动之初来预测将来项目会碰到什么需求，是极其困难的。消息系统在处理过程中间插入了一个隐含的、基于数据的接口层，两边的处理过程都要实现这一接口。这允许你独立的扩展或修改两边的处理过程，只要确保它们遵守同样的接口约束。

- 冗余

  有些情况下，处理数据的过程会失败。除非数据被持久化，否则将造成丢失。[消息队列](https://cloud.tencent.com/product/cmq?from=10680)把数据进行持久化直到它们已经被完全处理，通过这一方式规避了数据丢失风险。许多消息队列所采用的"插入-获取-删除"范式中，在把一个消息从队列中删除之前，需要你的处理系统明确的指出该消息已经被处理完毕，从而确保你的数据被安全的保存直到你使用完毕。

- 扩展性

  因为消息队列解耦了你的处理过程，所以增大消息入队和处理的频率是很容易的，只要另外增加处理过程即可。不需要改变代码、不需要调节参数。扩展就像调大电力按钮一样简单。

- 灵活性 & 峰值处理能力

  在访问量剧增的情况下，应用仍然需要继续发挥作用，但是这样的突发流量并不常见；如果为以能处理这类峰值访问为标准来投入资源随时待命无疑是巨大的浪费。使用消息队列能够使关键组件顶住突发的访问压力，而不会因为突发的超负荷的请求而完全崩溃。

- 顺序保证

  在大多使用场景下，数据处理的顺序都很重要。大部分消息队列本来就是排序的，并且能保证数据会按照特定的顺序来处理。Kafka保证一个Partition内的消息的有序性。

- 缓冲

  在任何重要的系统中，都会有需要不同的处理时间的元素。例如，加载一张图片比应用过滤器花费更少的时间。消息队列通过一个缓冲层来帮助任务最高效率的执行———写入队列的处理会尽可能的快速。该缓冲有助于控制和优化数据流经过系统的速度。



### 为什么Select * 会降低查询速度？

sql的执行过程是（不考虑查询缓存 ）
解析器 -----》 预处理器 -----》 优化器 -----》 查询执行引擎 -----》 存储引擎